/**
 * Copyright (c) 2020 ZxyKira
 * All rights reserved.
 * 
 * SPDX-License-Identifier: MIT
 */

/* ****************************************************************************************
 * Include
 */  
#include <stdio.h>

//-----------------------------------------------------------------------------------------
#include "mcuf/package-info.h"
#include "core/package-info.h"

//-----------------------------------------------------------------------------------------

/* ****************************************************************************************
 * Using
 */
 
//-----------------------------------------------------------------------------------------
using namespace core;

//-----------------------------------------------------------------------------------------
using mcuf::Thread;

/* ****************************************************************************************
 * Extern
 */

/* ****************************************************************************************
 * Class
 */

/* ****************************************************************************************
 * Variable
 */
#include "os_cmsis_rtos/rtx/cmsis_os2.h"
#include "os_cmsis_rtos/rtx/rtx_os.h" 
 
mcuf::hal::GeneralPin* led[8];
int ccc;
/* ****************************************************************************************
 * Method
 */

void thread_loop(void *argument){
  for(;;){
    ++ccc;
  }
}

void setup(Thread* _this){
  for(int i=0; i<8; ++i){
    led[i] = new CoreGeneralPin(Core::gpiob, i);
    led[i]->setOutput();
    led[i]->setLow();
  }
  //System::out().print("init\n");
  //_this->delay(100);
  osDelay(100);
}

void loop(Thread* _this){
  for(int i=0; i<8; ++i){
    led[i]->setToggle();
    //_this->delay(100);
    osDelay(100);
  }
}
 
/* ****************************************************************************************
 * End of file
 */ 